{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<title>Détail Lieu</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="Travelix Project">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="{% static 'styles/bootstrap4/bootstrap.min.css' %}">
<link href="{% static 'plugins/font-awesome-4.7.0/css/font-awesome.min.css' %}" rel="stylesheet" type="text/css">
<link href="{% static 'plugins/colorbox/colorbox.css' %}" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="{% static 'plugins/OwlCarousel2-2.2.1/owl.carousel.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'plugins/OwlCarousel2-2.2.1/owl.theme.default.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'plugins/OwlCarousel2-2.2.1/animate.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'styles/single_listing_styles.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<link rel="stylesheet" type="text/css" href="{% static 'styles/single_listing_responsive.css' %}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/material-design-icons@3.0.1/iconfont/material-icons.css">
<link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon.png' %}">
<link href="{% static 'styles/style.css' %}" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.1.1/assets/owl.carousel.min.css" rel="stylesheet" />
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
<link rel="stylesheet" href="{% static 'styles/comment.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'styles/contact_responsive.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'styles/main_styles.css' %}">

<style>
.rating_1 {color: #ffeb8d;}
.rating_2 {color: #fed46b;}
.rating_3{color: #fbb53d;}
.rating_4 {color: #fa9e1b;}
.rating_5 {color: #ef910a;}
</style>


</head>

<body>

<div class="super_container">
	
	<!-- Header -->

	<header class="header">

		<!-- Top Bar -->

		<div class="top_bar">
			<div class="container">
				<div class="row">
					<div class="col d-flex flex-row">
						<div class="phone">+45 345 3324 56789</div>
						<div class="social">
							<ul class="social_list">
								<li class="social_list_item"><a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li>
								<li class="social_list_item"><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
								<li class="social_list_item"><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
								<li class="social_list_item"><a href="#"><i class="fa fa-dribbble" aria-hidden="true"></i></a></li>
								<li class="social_list_item"><a href="#"><i class="fa fa-behance" aria-hidden="true"></i></a></li>
								<li class="social_list_item"><a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>
							</ul>
						</div>
						<div class="user_box ml-auto">
							<div class="user_box_login user_box_link"><a href="#">login</a></div>
							<div class="user_box_register user_box_link"><a href="#">register</a></div>
						</div>
					</div>
				</div>
			</div>		
		</div>

		<!-- Main Navigation -->

		<nav class="main_nav">
			<div class="container">
				<div class="row">
					<div class="col main_nav_col d-flex flex-row align-items-center justify-content-start">
						<div class="logo_container">
							<div class="logo"><img src="../../static/images/ourlogo.png" alt=""></div>
						</div>
						<div class="main_nav_container ml-auto">
							<ul class="main_nav_list">
								<li class="main_nav_item"><a href="index.html">home</a></li>
								<li class="main_nav_item"><a href="about.html">about us</a></li>
								<li class="main_nav_item"><a href="offers.html">offers</a></li>
								<li class="main_nav_item"><a href="blog.html">news</a></li>
								<li class="main_nav_item"><a href="contact.html">contact</a></li>
							</ul>
						</div>
						<div class="content_search ml-lg-0 ml-auto">
							<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
							width="17px" height="17px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">
								<g>
									<g>
										<g>
											<path class="mag_glass" fill="#FFFFFF" d="M78.438,216.78c0,57.906,22.55,112.343,63.493,153.287c40.945,40.944,95.383,63.494,153.287,63.494
											s112.344-22.55,153.287-63.494C489.451,329.123,512,274.686,512,216.78c0-57.904-22.549-112.342-63.494-153.286
											C407.563,22.549,353.124,0,295.219,0c-57.904,0-112.342,22.549-153.287,63.494C100.988,104.438,78.439,158.876,78.438,216.78z
											M119.804,216.78c0-96.725,78.69-175.416,175.415-175.416s175.418,78.691,175.418,175.416
											c0,96.725-78.691,175.416-175.416,175.416C198.495,392.195,119.804,313.505,119.804,216.78z"/>
										</g>
									</g>
									<g>
										<g>
											<path class="mag_glass" fill="#FFFFFF" d="M6.057,505.942c4.038,4.039,9.332,6.058,14.625,6.058s10.587-2.019,14.625-6.058L171.268,369.98
											c8.076-8.076,8.076-21.172,0-29.248c-8.076-8.078-21.172-8.078-29.249,0L6.057,476.693
											C-2.019,484.77-2.019,497.865,6.057,505.942z"/>
										</g>
									</g>
								</g>
							</svg>
						</div>

						<form id="search_form" class="search_form bez_1">
							<input type="search" class="search_content_input bez_1">
						</form>
						
						<div class="hamburger">
							<i class="fa fa-bars trans_200"></i>
						</div>
					</div>
				</div>
			</div>	
		</nav>

	</header>

	<div class="menu trans_500">
		<div class="menu_content d-flex flex-column align-items-center justify-content-center text-center">
			<div class="menu_close_container"><div class="menu_close"></div></div>
			<div class="logo menu_logo"><a href="#"><img src="../../static/images/ourlogo.png" alt=""></a></div>
			<ul>
				<li class="menu_item"><a href="index.html">home</a></li>
				<li class="menu_item"><a href="about.html">about us</a></li>
				<li class="menu_item"><a href="offers.html">offers</a></li>
				<li class="menu_item"><a href="blog.html">news</a></li>
				<li class="menu_item"><a href="contact.html">contact</a></li>
			</ul>
		</div>
	</div>

	<!-- Home -->

	<div class="home">
		<div class="home_background parallax-window" data-parallax="scroll" data-image-src="{% static 'images/single_background.jpg' %}"></div>
		<div class="home_content">
			<div class="home_title">Détails sur le lieu</div>
		</div>
	</div>

	

	<div class="listing">


		<!-- Single Listing -->

		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="single_listing">
						
						<!-- Hotel Info -->

						<div class="hotel_info">

							<!-- Title -->
							<div class="hotel_title_container d-flex flex-lg-row flex-column">
								<div class="hotel_title_content">
									<h1 class="hotel_title">{{lieu.nomLieu}}</h1>
									<div >
										{% if lieu.feedback == 0 %}
										  <div class="rating">
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
										  </div>
										{% elif lieu.feedback < 1 %}
										  <div class="rating">
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
										  </div>
										{% elif lieu.feedback < 2 %}
										  <div class="rating">
											<i class="fa fa-star rating_1"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
										  </div>
										{% elif lieu.feedback < 3 %}
										  <div class="rating">
											<i class="fa fa-star rating_1"></i>
											<i class="fa fa-star rating_2"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
										  </div>
										{% elif lieu.feedback < 4 %}
										  <div class="rating">
											<i class="fa fa-star rating_1"></i>
											<i class="fa fa-star rating_2"></i>
											<i class="fa fa-star rating_3"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
										  </div>
										{% elif lieu.feedback < 5 %}
										  <div class="rating">
											<i class="fa fa-star rating_1"></i>
											<i class="fa fa-star rating_2"></i>
											<i class="fa fa-star rating_3"></i>
											<i class="fa fa-star rating_4"></i>
											<i class="fa fa-star"></i>
										  </div>
										{% else %}
										  <div class="rating">
											<i class="fa fa-star rating_1"></i>
											<i class="fa fa-star rating_2"></i>
											<i class="fa fa-star rating_3"></i>
											<i class="fa fa-star rating_4"></i>
											<i class="fa fa-star rating_5"></i>
										  </div>
										{% endif %}
								   </div>
									<div class="hotel_location">{{lieu.region}} , {{lieu.commune}}</div>
								    </br>
									<li class="hotel_icons_item" ><i class="fas fa-clock fa-2x" style="color:#fa9e1b;"></i></li>
								
									Heure d'ouverture: <span>{{ lieu.H_ouverture|time:"H:i" }} H</span>
								    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    Heure de fermeture: <span>{{ lieu.H_fermeture|time:"H:i" }} H</span>
								</div>
								
								<div class="hotel_title_button ml-lg-auto text-lg-right" >
									<div class="hotel_title_button_content" style="display: flex; align-items: center; justify-content: center;">
									<div class="button book_button" style="width: 80px;background-color:#2a9d8f; border: none;text-align: center;display: flex; align-items: center; justify-content: center;"title="Enregistrer le lieu"><i class="fas fa-bookmark" style="display: inline-block; font-size: 30px;color: #fa9e1b;"></i></div>
									<div class="button book_button trans_200"><a href="{% url 'ListeDesLieux' user_id  %}">Retour à la liste<span></span><span></span><span></span></a></div> 
									</div>
									<div class="hotel_map_link_container">
										<div class="hotel_map_link">Voir la localisation sur map</div>
									</div>
								</div>
								
							</div>

							<!-- Listing Image -->

							<div class="hotel_image">
                              {% if lieu.photos.all %}
                                {% with first_photo=lieu.photos.first %}
								<img src="{{first_photo.image.url}}" alt="">
								<div class="hotel_review_container d-flex flex-column align-items-center justify-content-center">
									<div class="hotel_review">
										<div class="hotel_review_content">
											{% if lieu.feedback >= 4 %}
											<div class="hotel_review_title">very good</div>
											{% elif lieu.feedback >= 3%}
											<div class="hotel_review_title">good</div>
											{% else %}
											<div class="hotel_review_title">bad</div>
											{%endif%}
											<div class="hotel_review_subtitle">{{lieu.nmb_feedback}} reviews</div>
										</div>
										<div class="hotel_review_rating text-center">{{lieu.feedback}}</div>
									</div>
								</div>
                                {% endwith %}
								
                             
							  {% else %}
							     <div class="text-center">
								    </br>
								    <span style="font-size: larger;"><i class="fas fa-image"></i> Pas De photos</span>
								 </div>
							  {% endif %}
							</div>

							<!-- Hotel Gallery -->

							<div class="hotel_gallery">
								<div class="hotel_slider_container">
									<div class="owl-carousel owl-theme hotel_slider">

										<!-- Hotel Gallery Slider Item -->
                                      {% for photo in lieu.photos.all %}
										<div class="owl-item">
											<a class="colorbox cboxElement" href="{{photo.image.url}}">
												<img src="{{photo.image.url}}" alt="Photo">
											</a>
										</div>

									  {% endfor %}
									</div>

									<!-- Hotel Slider Nav - Prev -->
									<div class="hotel_slider_nav hotel_slider_prev">
										<svg version="1.1" id="Layer_6" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
											width="28px" height="33px" viewBox="0 0 28 33" enable-background="new 0 0 28 33" xml:space="preserve">
											<defs>
												<linearGradient id='hotel_grad_prev'>
													<stop offset='0%' stop-color='#fa9e1b'/>
													<stop offset='100%' stop-color='#2A9D8F'/>
												</linearGradient>
											</defs>
											<path class="nav_path" fill="#F3F6F9" d="M19,0H9C4.029,0,0,4.029,0,9v15c0,4.971,4.029,9,9,9h10c4.97,0,9-4.029,9-9V9C28,4.029,23.97,0,19,0z
											M26,23.091C26,27.459,22.545,31,18.285,31H9.714C5.454,31,2,27.459,2,23.091V9.909C2,5.541,5.454,2,9.714,2h8.571
											C22.545,2,26,5.541,26,9.909V23.091z"/>
											<polygon class="nav_arrow" fill="#F3F6F9" points="15.044,22.222 16.377,20.888 12.374,16.885 16.377,12.882 15.044,11.55 9.708,16.885 11.04,18.219 
											11.042,18.219 "/>
										</svg>
									</div>
									
									<!-- Hotel Slider Nav - Next -->
									<div class="hotel_slider_nav hotel_slider_next">
										<svg version="1.1" id="Layer_7" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
										width="28px" height="33px" viewBox="0 0 28 33" enable-background="new 0 0 28 33" xml:space="preserve">
											<defs>
												<linearGradient id='hotel_grad_next'>
													<stop offset='0%' stop-color='#fa9e1b'/>
													<stop offset='100%' stop-color='#2A9D8F'/>
												</linearGradient>
											</defs>
										<path class="nav_path" fill="#F3F6F9" d="M19,0H9C4.029,0,0,4.029,0,9v15c0,4.971,4.029,9,9,9h10c4.97,0,9-4.029,9-9V9C28,4.029,23.97,0,19,0z
										M26,23.091C26,27.459,22.545,31,18.285,31H9.714C5.454,31,2,27.459,2,23.091V9.909C2,5.541,5.454,2,9.714,2h8.571
										C22.545,2,26,5.541,26,9.909V23.091z"/>
										<polygon class="nav_arrow" fill="#F3F6F9" points="13.044,11.551 11.71,12.885 15.714,16.888 11.71,20.891 13.044,22.224 18.379,16.888 17.048,15.554 
										17.046,15.554 "/>
										</svg>
									</div>

								</div>
							</div>

							<!-- Hotel Info Text -->

							<div class="hotel_info_text">
								<p>{{lieu.descripLieu}}</p>
							</div>
 

						</div>
					    </br>
				 		<div class="mb-4"></div>
					  
						<!-- Events -->
                        <div class="col-lg-12">
                            <div class="card">
                                <div class="card-header" style="background-color: #264653;">
                                    <h4 class="card-title">Événements En Relation</h4>
                                </div>
                                <div class="card-body" style="background-color: #264653;">
                                    <div class="table-responsive">
                                        <table class="table table-hover table-responsive-sm">
                                            <thead>
                                                <tr>
                                                    
                                                    <th>Nom de l'événement</th>
                                                    <th>Date</th>
                                                    <th>À propos de l'événement</th>
                                                    
                                                </tr>
                                            </thead>
                                            <tbody>
                                             {% for event in events %}
                                                
                                                    <tr >
                                                      <th>{{event.nomEvent}}</th>
                                                      <td>{{event.dateEvent}}</td>
                                                      <td style="display: flex; align-items: center; justify-content: center;">
                                                        <span class="button book_button trans_200" style="width: 40px;height: 40px;display: flex; align-items: center; justify-content: center;" title="Détails">
														<a href="{% url 'EventDetail' user_id event.nomEvent event.idEvent%}" style=" color: #fa9e1b;"><i class="fas fa-search" ></i></a> 
														</span>
                                                      </td>
                                                     
                                                      
                                                    </tr>
                                                    {% empty %}
                                                    <tr>
                                                        <td colspan="4">Pas d'événements actuels ou à venir</td>
                                                    </tr>
                                             {% endfor %}
                                             
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                           
                        </div>
                        <div class="mb-4"></div>
					 </br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br>
					 <div class="row">
						<!--Infos-->
						<div class="col-md-6 mr-4 ">
							<div class="card">
								<div class="card-header" style="background: linear-gradient(to right, #fa9e1b, #2a9d8f)">
									<h4 class="card-title" style="color: #FFFFFF;">Informations</h4>
								</div>
								<div class="card-body">
									<!-- Nav tabs -->
									<div class="default-tab">
										<ul class="nav nav-tabs" role="tablist">
											<li class="nav-item">
												<a class="nav-link active" style="color: #fa9e1b;" data-toggle="tab" href="#home">Histoire</a>
											</li>
											<li class="nav-item">
												<a class="nav-link" style="color:#2a9d8f" data-toggle="tab" href="#profile">Exigences</a>
											</li>
											<li class="nav-item">
												<a class="nav-link" style="color:#264653" data-toggle="tab" href="#contact">Expressions Courantes</a>
											</li>
											
										</ul>
										<div class="tab-content">
											<div class="tab-pane fade show active" id="home" role="tabpanel">
												<div class="pt-4">
													
													<p>{{lieu.faitHisto}}</p>
													{% if lieu.faitHisto|length == 0 %}
													  <p>Pas de faits historiques</p>
													{% endif %}
												</div>
											</div>
											<div class="tab-pane fade" id="profile">
												<div class="pt-4">
													
													<p>{{lieu.exigence}}</p>
													{% if lieu.exigence|length == 0 %}
													<p>Pas d'exigences dans ce lieu</p>
													{% endif %}
												</div>
											</div>
											<div class="tab-pane fade" id="contact">
												<div class="pt-4">
												
													<p>{{lieu.expressCourantes}}</p>
													{% if lieu.expressCourantes|length == 0 %}
													<p>Pas d'expressions courantes</p>
													{% endif %}
												</div>
											</div>
											
										</div>
									</div>
								</div>
							</div>
							 
						</div>
				       	
						<!--Transport-->
						<div class="col-xl-4 col-xxl-6 col-lg-6 col-md-6">
							<div class="card" style="width: 500px;">
								<div class="card-header" style="background: linear-gradient(to right, #264653, #2a9d8f)">
									<h4 class="card-title" style="color: #FFFFFF;">Transports Disponibles</h4>
								</div>
								<div class="card-body">
									<div class="basic-list-group">
										<ul class="list-group">
											{% for transport, icon_class in transports_with_icons %}
											
											<li class="list-group-item d-flex justify-content-between align-items-center">
												{{transport.typeTrans}}
												{% if icon_class != "fa-cable-car" %}
												<span >
												   <i class="fas {{ icon_class }} fa-lg" style="color: black; margin-right: 3px;"></i>
											  	</span>
												{% else %}
												
												<span>
												
												 <img src="{% static 'images/cable_car.png' %}" style="width: 25px; height: 25px; color: black;margin-left: 50px !important;">

											  	</span>
												{% endif %}
											</li>
											{% empty %}
											<li class="list-group-item d-flex justify-content-between align-items-center">
												
												<span >
													Pas de transports disponibles	
											  	</span>
												
											</li>
											
											{% endfor %}
											
										</ul>
									</div>
								</div>
							</div>
						</div>
					 </div>

					 <!-- Produits Slider -->

					 <div class="testimonials">
						<div class="test_border"></div>
						<div class="container">
							<div class="row">
								<div class="col text-center">
									<h2 class="reviews_title">Produits artisanaux disponibles </h2>
								</div>
							</div>
							<div class="row">
								<div class="col">
									
									<!-- Produits Slider -->

									<div class="test_slider_container">
										<div class="owl-carousel owl-theme test_slider">

											<!-- Produits Item -->
											{% for produit in produits %}
												<div class="owl-item">
													<div class="test_item">
														{% if produit.pictures.all %}
															{% with first_photo=produit.pictures.first %}
																<div class="test_image"><img src="{{ first_photo.image.url }}" alt="https://unsplash.com/@anniegray"></div>
															{% endwith %}
														{% endif %}
														<div class="test_content_container">
															<div class="test_content">
																<div class="test_item_info">
																	<div class="test_name">{{ produit.nomProduit }}</div>
																	<div class="test_date">{{ produit.prix }} DA</div>
																</div>
																<br><br><br>
																<div class="test_quote_title">{{ produit.origine }}</div>
															</div>
														</div>
													</div>
												</div>
											{% endfor %}

											

											
										</div>

										<!-- Testimonials Slider Nav - Prev -->
										<div class="test_slider_nav test_slider_prev">
											<svg version="1.1" id="Layer_6" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
												width="28px" height="33px" viewBox="0 0 28 33" enable-background="new 0 0 28 33" xml:space="preserve">
												<defs>
													<linearGradient id='test_grad_prev'>
														<stop offset='0%' stop-color='#fa9e1b'/>
														<stop offset='100%' stop-color='#2a9d8f'/>
													</linearGradient>
												</defs>
												<path class="nav_path" fill="#F3F6F9" d="M19,0H9C4.029,0,0,4.029,0,9v15c0,4.971,4.029,9,9,9h10c4.97,0,9-4.029,9-9V9C28,4.029,23.97,0,19,0z
												M26,23.091C26,27.459,22.545,31,18.285,31H9.714C5.454,31,2,27.459,2,23.091V9.909C2,5.541,5.454,2,9.714,2h8.571
												C22.545,2,26,5.541,26,9.909V23.091z"/>
												<polygon class="nav_arrow" fill="#F3F6F9" points="15.044,22.222 16.377,20.888 12.374,16.885 16.377,12.882 15.044,11.55 9.708,16.885 11.04,18.219 
												11.042,18.219 "/>
											</svg>
										</div>
										
										<!-- Testimonials Slider Nav - Next -->
										<div class="test_slider_nav test_slider_next">
											<svg version="1.1" id="Layer_7" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
											width="28px" height="33px" viewBox="0 0 28 33" enable-background="new 0 0 28 33" xml:space="preserve">
												<defs>
													<linearGradient id='test_grad_next'>
														<stop offset='0%' stop-color='#fa9e1b'/>
														<stop offset='100%' stop-color='#2a9d8f'/>
													</linearGradient>
												</defs>
											<path class="nav_path" fill="#F3F6F9" d="M19,0H9C4.029,0,0,4.029,0,9v15c0,4.971,4.029,9,9,9h10c4.97,0,9-4.029,9-9V9C28,4.029,23.97,0,19,0z
											M26,23.091C26,27.459,22.545,31,18.285,31H9.714C5.454,31,2,27.459,2,23.091V9.909C2,5.541,5.454,2,9.714,2h8.571
											C22.545,2,26,5.541,26,9.909V23.091z"/>
											<polygon class="nav_arrow" fill="#F3F6F9" points="13.044,11.551 11.71,12.885 15.714,16.888 11.71,20.891 13.044,22.224 18.379,16.888 17.048,15.554 
											17.046,15.554 "/>
											</svg>
										</div>

									</div>
									
								</div>
							</div>

						</div>
					</div>
						<!-- Reviews -->

						<div class="reviews">
							<div class="reviews_title" style="text-align: center;" >Commentaires</div>
							

							 <!-- End Stars -->
								<!-- TESTIMONIALS -->
								<section class="testimonials">
									<div class="container">

									<div class="row">
										<div class="col-sm-12">
										<div id="customers-testimonials" class="owl-carousel">

											<!--TESTIMONIAL 1 -->

											{% for comment in lieu.comments.all %}
											<div class="item">
											<div class="shadow-effect">
												<p>{{ comment.text }}.</p>
											</div>
											<div class="testimonial-name">{{ comment.author }}</div>
											</div>
											{% endfor %}


										</div>
										</div>
									</div>
									</div>
								</section>
									<!-- END OF TESTIMONIALS -->

				        </div>
				  <div class="reviews_title" style="text-align: center; ">Évaluez nous</div>
				  <section class="ratesection">
				  <div class="ratiing">
					
					<input type="radio" id="star5" name="ratiing" value="5" data-lieu-id="{{ lieu.idLieu }}">
					<label for="star5"></label>
					<input type="radio" id="star4" name="ratiing" value="4" data-lieu-id="{{ lieu.idLieu }}">
					<label for="star4"></label>
					<input type="radio" id="star3" name="ratiing" value="3" data-lieu-id="{{ lieu.idLieu }}">
					<label for="star3"></label>
					<input type="radio" id="star2" name="ratiing" value="2" data-lieu-id="{{ lieu.idLieu }}">
					<label for="star2"></label>
					<input type="radio" id="star1" name="ratiing" value="1" data-lieu-id="{{ lieu.idLieu }}">
					<label for="star1"></label>
				  </div>
				</section>
			  
				   <div class="contact_form_section">
					  <div class="row">
							  <div class="col">
								  <!-- Contact Form -->
								  <div class="contact_form_container">
									  <div class="contact_title" >Que pensez-vous ?</div>
									  <form action="#" id="contact_form" class="contact_form text-center">
							 {% csrf_token %}  
										  <textarea id="contact_form_message" class="text_field contact_form_message" name="message" rows="4" placeholder="Message" required="required" data-error="Please, write us a message."></textarea>
										  <button type="submit" id="form_submit_button" class="form_submit_button button trans_200">Ajouter <span></span><span></span><span></span></button>
									  </form>
									    
								 </div>
			  
							  </div>
							   
						
					  </div>
				  </div>
						
					</div>
				</div>
			</div>
		</div>		
	</div>

	<!-- Footer -->

	<footer class="footer">
		<div class="container">
			<div class="row">

				<!-- Footer Column -->
				<div class="col-lg-3 footer_column">
					<div class="footer_col">
						<div class="footer_content footer_about">
							<div class="logo_container footer_logo">
								<div class="logo"><img src="../../static/images/ourlogo.png" alt=""></div>
							</div>
							<p class="footer_about_text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus quis vu lputate eros, iaculis consequat nisl. Nunc et suscipit urna. Integer eleme ntum orci eu vehicula pretium.</p>
							<ul class="footer_social_list">
								<li class="footer_social_item"><a href="#"><i class="fa fa-pinterest"></i></a></li>
								<li class="footer_social_item"><a href="#"><i class="fa fa-facebook-f"></i></a></li>
								<li class="footer_social_item"><a href="#"><i class="fa fa-twitter"></i></a></li>
								<li class="footer_social_item"><a href="#"><i class="fa fa-dribbble"></i></a></li>
								<li class="footer_social_item"><a href="#"><i class="fa fa-behance"></i></a></li>
							</ul>
						</div>
					</div>
				</div>

				<!-- Footer Column -->
				<div class="col-lg-3 footer_column">
					<div class="footer_col">
						<div class="footer_title">blog posts</div>
						<div class="footer_content footer_blog">
							
							<!-- Footer blog item -->
							<div class="footer_blog_item clearfix">
								<div class="footer_blog_image"><img src="../../static/images/footer_blog_1.jpg" alt="https://unsplash.com/@avidenov"></div>
								<div class="footer_blog_content">
									<div class="footer_blog_title"><a href="blog.html">Travel with us this year</a></div>
									<div class="footer_blog_date">Nov 29, 2017</div>
								</div>
							</div>
							
							<!-- Footer blog item -->
							<div class="footer_blog_item clearfix">
								<div class="footer_blog_image"><img src="../../static/images/footer_blog_2.jpg" alt="https://unsplash.com/@deannaritchie"></div>
								<div class="footer_blog_content">
									<div class="footer_blog_title"><a href="blog.html">New destinations for you</a></div>
									<div class="footer_blog_date">Nov 29, 2017</div>
								</div>
							</div>

							<!-- Footer blog item -->
							<div class="footer_blog_item clearfix">
								<div class="footer_blog_image"><img src="../../static/images/footer_blog_3.jpg" alt="https://unsplash.com/@bergeryap87"></div>
								<div class="footer_blog_content">
									<div class="footer_blog_title"><a href="blog.html">Travel with us this year</a></div>
									<div class="footer_blog_date">Nov 29, 2017</div>
								</div>
							</div>

						</div>
					</div>
				</div>

				<!-- Footer Column -->
				<div class="col-lg-3 footer_column">
					<div class="footer_col">
						<div class="footer_title">tags</div>
						<div class="footer_content footer_tags">
							<ul class="tags_list clearfix">
								<li class="tag_item"><a href="#">design</a></li>
								<li class="tag_item"><a href="#">fashion</a></li>
								<li class="tag_item"><a href="#">music</a></li>
								<li class="tag_item"><a href="#">video</a></li>
								<li class="tag_item"><a href="#">party</a></li>
								<li class="tag_item"><a href="#">photography</a></li>
								<li class="tag_item"><a href="#">adventure</a></li>
								<li class="tag_item"><a href="#">travel</a></li>
							</ul>
						</div>
					</div>
				</div>

				<!-- Footer Column -->
				<div class="col-lg-3 footer_column">
					<div class="footer_col">
						<div class="footer_title">contact info</div>
						<div class="footer_content footer_contact">
							<ul class="contact_info_list">
								<li class="contact_info_item d-flex flex-row">
									<div><div class="contact_info_icon"><img src="../../static/images/placeholder.svg" alt=""></div></div>
									<div class="contact_info_text">4127 Raoul Wallenber 45b-c Gibraltar</div>
								</li>
								<li class="contact_info_item d-flex flex-row">
									<div><div class="contact_info_icon"><img src="../../static/images/phone-call.svg" alt=""></div></div>
									<div class="contact_info_text">2556-808-8613</div>
								</li>
								<li class="contact_info_item d-flex flex-row">
									<div><div class="contact_info_icon"><img src="../../static/images/message.svg" alt=""></div></div>
									<div class="contact_info_text"><a href="mailto:contactme@gmail.com?Subject=Hello" target="_top">contactme@gmail.com</a></div>
								</li>
								<li class="contact_info_item d-flex flex-row">
									<div><div class="contact_info_icon"><img src="../../static/images/planet-earth.svg" alt=""></div></div>
									<div class="contact_info_text"><a href="https://colorlib.com">www.colorlib.com</a></div>
								</li>
							</ul>
						</div>
					</div>
				</div>

			</div>
		</div>
	</footer>

	<!-- Copyright -->

	<div class="copyright">
		<div class="container">
			<div class="row">
				<div class="col-lg-3 order-lg-1 order-2  ">
					<div class="copyright_content d-flex flex-row align-items-center">
						<div><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></div>
					</div>
				</div>
				<div class="col-lg-9 order-lg-2 order-1">
					<div class="footer_nav_container d-flex flex-row align-items-center justify-content-lg-end">
						<div class="footer_nav">
							<ul class="footer_nav_list">
								<li class="footer_nav_item"><a href="index.html">home</a></li>
								<li class="footer_nav_item"><a href="about.html">about us</a></li>
								<li class="footer_nav_item"><a href="offers.html">offers</a></li>
								<li class="footer_nav_item"><a href="blog.html">news</a></li>
								<li class="footer_nav_item"><a href="contact.html">contact</a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

</div>

<script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
<script src="{% static 'styles/bootstrap4/popper.js' %}"></script>
<script src="{% static 'styles/bootstrap4/bootstrap.min.js' %}"></script>
<script src="{% static 'plugins/easing/easing.js' %}"></script>
<script src="{% static 'plugins/parallax-js-master/parallax.min.js' %}"></script>
<script src="{% static 'plugins/colorbox/jquery.colorbox-min.js' %}"></script>
<script src="{% static 'plugins/OwlCarousel2-2.2.1/owl.carousel.js' %}"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyCIwF204lFZg1y4kPSIhKaHEXMLYxxuMhA"></script>
<script src="{% static 'js/single_listing_custom.js' %}"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'js/custom.js' %}"></script>
<script>
    $(document).ready(function () {
        var lieu_id = "{{ lieu.idLieu }}";
        var name="{{name}}"
        var wsPath = 'ws://' + window.location.host + '/ws/lieu/' + lieu_id + '/comments/';
        var socket = new WebSocket(wsPath);

        // When the WebSocket connection is open
        socket.onopen = function (lieu) {
            console.log('WebSocket connection opened.');
        };
 
        // When a new comment is received
        socket.onmessage = function (lieu) {
            var commentData = JSON.parse(lieu.data);
            var comment = commentData.comment;
            var author = commentData.author;

// Update the comment section in your HTML template

var commentElement = document.createElement('div');
commentElement.className = 'item';

var shadowEffect = document.createElement('div');
shadowEffect.className = 'shadow-effect';
var commentText = document.createElement('p');
commentText.textContent = comment;
shadowEffect.appendChild(commentText);

var testimonialName = document.createElement('div');
testimonialName.className = 'testimonial-name';
testimonialName.textContent = author;

commentElement.appendChild(shadowEffect);
commentElement.appendChild(testimonialName);

// Append the new comment to the comment section
$('#customers-testimonials').trigger('add.owl.carousel', [commentElement]).trigger('refresh.owl.carousel');

        };

        // When the WebSocket connection is closed
        socket.onclose = function (lieu) {
            console.log('WebSocket connection closed.');
        };

        // When the comment form is submitted
        $('#contact_form').submit(function (lieu) {
            lieu.preventDefault();
            var comment = $('#contact_form_message').val();
            var author = $('#comment-author').val();
            var commentData = {
                'comment': comment,
                'author': name
            };
            console.log(commentData);
            // Send the comment data to the WebSocket
            socket.send(JSON.stringify(commentData));

            // Clear the comment form
            $('#contact_form_message').val('');
            
        });
    });
</script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.1.1/owl.carousel.min.js"></script>
    <script>
    jQuery(document).ready(function($) {
        "use strict";
        //  TESTIMONIALS CAROUSEL HOOK
        $('#customers-testimonials').owlCarousel({
            loop: true,
            center: true,
            items: 3,
            margin: 0,
            autoplay: true,
            dots:true,
            autoplayTimeout: 8500,
            smartSpeed: 450,
            responsive: {
              0: {
                items: 1
              },
              768: {
                items: 2
              },
              1170: {
                items: 3
              }
            }
        });
    });
</script>
<script>
  var lieuId = "{{ lieu.idLieu }}";  // Get the lieu ID from the template context

  // Retrieve the user's feedback for the current lieu
  $.ajax({
    url: '/retrieve-feedback/',  // Replace with your Django URL for retrieving feedback
    type: 'POST',
    data: {
      'lieu_id': lieuId
    },
    beforeSend: function(xhr, settings) {
      xhr.setRequestHeader('X-CSRFToken', '{{ csrf_token }}');  // Include the CSRF token in the request headers
    },
    success: function(response) {
      var feedback = response.feedback;
      var numFeedback = response.num_feedback;
      var userRating = response.user_rating;  // Use the user's rating from the response
      $('.ratiing input').prop('checked', false);  // Uncheck all stars
      if (userRating > 0) {
        $('#star' + userRating).prop('checked', true);  // Check the star corresponding to the user's rating
      }
    },
    error: function(error) {
      // Handle the error if needed
      console.log('Error retrieving feedback:', error);
    }
  });

  var ratingInputs = document.querySelectorAll('.ratiing input');
  ratingInputs.forEach(function(input) {
    input.addEventListener('change', function() {
      // Perform any necessary action upon rating selection
      var selectedRating = this.value;
      console.log('Selected rating:', selectedRating);
      var lieuId = this.getAttribute('data-lieu-id');
      update_feedback(lieuId, selectedRating);
    });
  });

  function update_feedback(lieuId, rating) {
    var csrftoken = getCookie('csrftoken');
    // AJAX request to update the feedback value
    $.ajax({
      url: '/update-feedback/',  // Replace with your Django URL for updating feedback
      type: 'POST',
      data: {
        'lieu_id': lieuId,
        'rating': rating
      },
      beforeSend: function(xhr, settings) {
        // Add CSRF token to the request headers
        xhr.setRequestHeader('X-CSRFToken', csrftoken);
      },
      success: function(response) {
        // Handle the response if needed
        console.log('Feedback updated successfully');

        // Calculate the new feedback value and update the displayed stars
        var feedback = response.feedback;
        var numFeedback = response.num_feedback;
        var updatedFeedback = (feedback * numFeedback + parseInt(rating)) / (numFeedback + 1);
        var updatedStars = Math.round(updatedFeedback);
        $('.ratiing input').prop('checked', false);  // Uncheck all stars
        for (var i = 1; i <= updatedStars; i++) {
          $('#star' + i).prop('checked', true);  // Check stars up to the updated rating
        }
        $.ajax({
          url: '/retrieve-feedback/',  // Replace with your Django URL for retrieving feedback
          type: 'POST',
          data: {
            'lieu_id': lieuId
          },
          beforeSend: function(xhr, settings) {
            xhr.setRequestHeader('X-CSRFToken', '{{ csrf_token }}');  // Include the CSRF token in the request headers
          },
          success: function(response) {
            var feedback = response.feedback;
            var numFeedback = response.num_feedback;
            var userRating = response.user_rating;  // Use the user's rating from the response
            $('.ratiing input').prop('checked', false);  // Uncheck all stars
            if (userRating > 0) {
              $('#star' + userRating).prop('checked', true);  // Check the star corresponding to the user's rating
            }
          },
          error: function(error) {
            // Handle the error if needed
            console.log('Error retrieving feedback:', error);
          }
        });
      },
      error: function(error) {
        // Handle the error if needed
        console.log('Error updating feedback:', error);
      }
    });
    console.log('Updating feedback for lieu:', lieuId, 'with rating:', rating);
  }

  function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie !== '') {
      var cookies = document.cookie.split(';');
      for (var i = 0; i < cookies.length; i++) {
        var cookie = cookies[i].trim();
        // Extract the CSRF token value
        if (cookie.substring(0, name.length + 1) === (name + '=')) {
          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
          break;
        }
      }
    }
    return cookieValue;
  }
</script>

</body>

</html>